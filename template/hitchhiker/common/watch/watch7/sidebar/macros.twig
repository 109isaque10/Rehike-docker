{% macro video_list(data, id) %}
<ul {{ id ? ('id="' ~ id ~ '"')|raw }} class="video-list">
    {% for item in data %}
        {{ _self.video_item(item) }}
    {% endfor %}
</ul>
{% endmacro %}

{# TODO: cleanup and generalise #}
{% macro video_item(data) %}
{% import "common/uix/watch_later_button.twig" as wlBtn %}
{% if data.compactVideoRenderer %}
{% set data = data.compactVideoRenderer %}
<li class="video-list-item related-list-item  show-video-time related-list-item-compact-video">
    <div class="content-wrapper">
        <a href="/watch?v={{ data.videoId }}" class=" content-link spf-link        spf-link "   title="{{ getText(data.title) }}" rel=" spf-prefetch nofollow">
        <span dir="ltr" class="title" aria-describedby="description-id-920876">
        {{ getText(data.title) }}
        </span>
        <span class="accessible-description" id="description-id-920876">
        - Duration: {{ getVideoTime(data) }}.
        </span>
        <span class="stat attribution">{{ yt.config.byTextOnByline ? "<span>by </span>" }}<span class="">{{ getText(data.shortBylineText) }}</span></span>
        <span class="stat view-count">{{ getText(data.viewCountText) }}{% if yt.config.dateOnWatchSidebarItems %} â€¢ {{ getText(data.publishedTimeText) }}{% endif %}</span>
        </a>
    </div>
    <div class="thumb-wrapper{{ timeOverlay ? " contains-percent-duration-watched" }}">
        <a href="/watch?v={{ data.videoId }}" class="  thumb-link spf-link        spf-link "   tabindex="-1" rel=" spf-prefetch nofollow"  aria-hidden="true">
            <span class="yt-uix-simple-thumb-wrap yt-uix-simple-thumb-related" tabindex="0" data-vid="{{ data.videoId }}">
            <img aria-hidden="true" style="top: 0px" width="168" height="94" data-thumb="{{ getThumb(data) }}" alt="" src="{{ PIXEL }}">
            <span class="video-time">{{ getVideoTime(data) }}</span></span>
        </a>
        {% set percentWatched = getWatchedPercent(info) %}
        {% if percentWatched != null %}
        <span class="resume-playback-background"></span>
        <span class="resume-playback-progress-bar" style="width:{{ percentWatched }}%"></span>
        {% endif %}
        {% set wlButton = getWLOverlay(data) %}
        {% if wlButton != null %}
            {{ wlBtn.render(wlButton, info.videoId) }}
        {% endif %}
    </div>
</li>
{% elseif data.continuationItemRenderer %}
{% set data = data.continuationItemRenderer %}
<div id="watch-more-related" class="hid">
    <li id="watch-more-related-loading">Loading more suggestions...</li>
</div>
<button id="watch-more-related-button" class="yt-uix-button yt-uix-button-size-default yt-uix-button-expander" onclick=";return false;" data-continuation="{{ data.continuationEndpoint.continuationCommand.token }}" data-button-action="yt.www.watch.related.loadMore">
    <span class="yt-uix-button-content">Show more</span>
</button>
{% endif %}
{% endmacro %}